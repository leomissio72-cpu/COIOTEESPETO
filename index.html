<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Coiote BBQ - Sistema de Gest√£o</title>
    <meta name="description" content="Sistema profissional de gest√£o para restaurante" />
    <meta property="og:title" content="Coiote BBQ - Sistema de Gest√£o" />
    <meta name="theme-color" content="#000000" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #000000; color: #ffffff; line-height: 1.6; }
        .app { display: none; min-height: 100vh; } /* Hidden by default until login */
        .login-screen { display: flex; height: 100vh; align-items: center; justify-content: center; background: #000000; flex-direction: column; }
        
        .sidebar { width: 260px; background: #1a1a1a; border-right: 1px solid #333333; padding: 20px; overflow-y: auto; position: sticky; top: 0; height: 100vh; }
        .logo { font-family: 'Outfit', sans-serif; font-size: 20px; font-weight: 700; margin-bottom: 30px; display: flex; align-items: center; gap: 10px; }
        .nav-menu { list-style: none; }
        .nav-item { margin-bottom: 8px; }
        .nav-link { display: flex; align-items: center; gap: 12px; padding: 12px 14px; border-radius: 6px; cursor: pointer; border: none; background: none; color: #cccccc; font-size: 14px; font-weight: 500; transition: all 0.2s ease; width: 100%; text-align: left; font-family: inherit; }
        .nav-link:hover { background: #333333; color: #ffffff; }
        .nav-link.active { background: #ffffff; color: #000000; }
        .main-content { flex: 1; overflow-y: auto; display: flex; flex-direction: column; }
        .page { display: none; flex: 1; }
        .page.active { display: block; }
        .container { max-width: 1400px; margin: 0 auto; width: 100%; padding: 20px; }
        header { margin-bottom: 30px; }
        h1 { font-family: 'Outfit', sans-serif; font-size: 28px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
        .page-subtitle { color: #999999; font-size: 14px; margin-top: 5px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #1a1a1a; border: 1px solid #333333; border-radius: 8px; padding: 20px; transition: all 0.2s ease; }
        .stat-card:hover { border-color: #666666; }
        .stat-label { font-size: 12px; color: #888888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
        .stat-value { font-family: 'Outfit', sans-serif; font-size: 24px; font-weight: 700; }
        .card { background: #1a1a1a; border: 1px solid #333333; border-radius: 8px; overflow: hidden; margin-bottom: 30px; }
        .card-header { padding: 20px; border-bottom: 1px solid #333333; background: #0f0f0f; }
        .card-header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .card-title { font-family: 'Outfit', sans-serif; font-size: 18px; font-weight: 600; display: flex; align-items: center; gap: 10px; }
        .card-content { padding: 20px; }
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; font-size: 12px; font-weight: 600; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        input, select { width: 100%; padding: 10px 12px; background: #0f0f0f; border: 1px solid #333333; border-radius: 4px; font-size: 14px; font-family: inherit; color: #ffffff; transition: all 0.2s ease; }
        input:focus, select:focus { outline: none; border-color: #666666; background: #1a1a1a; }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .category-filter { margin-bottom: 20px; }
        .category-buttons { display: flex; gap: 8px; flex-wrap: wrap; }
        .category-btn { padding: 8px 14px; background: #0f0f0f; border: 1px solid #333333; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500; color: #cccccc; transition: all 0.2s ease; }
        .category-btn:hover { border-color: #666666; color: #ffffff; }
        .category-btn.active { background: #ffffff; color: #000000; border-color: #ffffff; }
        .btn { padding: 10px 16px; background: #ffffff; color: #000000; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.2s ease; font-family: inherit; }
        .btn:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-secondary { background: #333333; color: #ffffff; }
        .btn-secondary:hover { background: #444444; }
        .btn-danger { background: #ff4444; color: #ffffff; }
        .btn-danger:hover { background: #ff5555; }
        .btn-export { background: #22aa22; color: #ffffff; }
        .btn-export:hover { background: #2ab82a; }
        .btn-small { padding: 6px 12px; font-size: 12px; }
        .table-wrapper { overflow-x: auto; border: 1px solid #333333; border-radius: 6px; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        thead { background: #0f0f0f; border-bottom: 1px solid #333333; }
        th { padding: 12px 16px; text-align: left; font-weight: 600; text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; }
        td { padding: 12px 16px; border-bottom: 1px solid #333333; }
        tbody tr:hover { background: #0f0f0f; }
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        .empty-message { text-align: center; padding: 60px 20px; color: #888888; }
        .empty-icon { font-size: 48px; margin-bottom: 15px; opacity: 0.3; }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.9); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #1a1a1a; border: 1px solid #333333; border-radius: 8px; padding: 30px; max-width: 500px; width: 90%; }
        .modal-header { font-family: 'Outfit', sans-serif; font-size: 20px; font-weight: 600; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .modal-close { cursor: pointer; font-size: 24px; color: #888888; background: none; border: none; }
        .modal-close:hover { color: #ffffff; }
        .payment-methods { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 20px 0; }
        .payment-method { padding: 15px; border: 2px solid #333333; border-radius: 6px; text-align: center; cursor: pointer; transition: all 0.2s ease; background: #0f0f0f; }
        .payment-method:hover { border-color: #666666; }
        .payment-method.selected { border-color: #0066cc; background: #1a3366; }
        .payment-method-name { font-weight: 600; margin-bottom: 5px; }
        .qr-code-display { text-align: center; margin: 20px 0; padding: 20px; background: #0f0f0f; border-radius: 6px; }
        #qrcode { display: inline-block; }
        .pix-code { background: #0f0f0f; border: 1px solid #333333; border-radius: 6px; padding: 15px; margin: 15px 0; font-family: monospace; font-size: 11px; word-break: break-all; color: #cccccc; }
        .badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
        .badge-pix { background: #0066cc; color: #ffffff; }
        .badge-dinheiro { background: #22aa22; color: #ffffff; }
        .badge-debito { background: #aa6600; color: #ffffff; }
        .badge-credito { background: #aa0066; color: #ffffff; }
        .filter-section { background: #0f0f0f; padding: 15px; border-radius: 6px; margin-bottom: 15px; }
        @media (max-width: 768px) {
            .app { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: relative; }
            .nav-menu { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
            .nav-link { padding: 10px 8px; font-size: 12px; }
            .form-row { grid-template-columns: 1fr; }
            .payment-methods { grid-template-columns: 1fr; }
        }
        
        /* Login Styles */
        .login-card { background: #1a1a1a; padding: 30px; border-radius: 8px; border: 1px solid #333333; width: 100%; max-width: 400px; text-align: center; }
        .btn-google { background: #ffffff; color: #000000; width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px; padding: 12px; font-weight: bold; }
        .btn-google:hover { background: #eeeeee; }
    </style>
</head>
<body>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="logo" style="font-size: 32px; margin-bottom: 40px;">üçñ Coiote BBQ</div>
        <div class="login-card">
            <h2 style="margin-bottom: 10px; font-family: 'Outfit', sans-serif;">Bem-vindo</h2>
            <p style="color: #888; margin-bottom: 30px;">Fa√ßa login para acessar o sistema</p>
            <button class="btn btn-google" onclick="handleLogin()">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="18" alt="Google">
                Entrar com Google
            </button>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="app">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">üçñ Coiote BBQ</div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <button class="nav-link active" onclick="switchPage('dashboard', event)">üìä Dashboard</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="switchPage('menu', event)">üõí Card√°pio</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="switchPage('orders', event)">üìã Comandas</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="switchPage('sales', event)">üí∞ Vendas</button>
                </li>
                <li class="nav-item" style="margin-top: 20px; border-top: 1px solid #333; padding-top: 20px;">
                    <button class="nav-link" onclick="handleLogout()" style="color: #ff4444;">üö™ Sair</button>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <section id="dashboard" class="page active">
                <div class="container">
                    <header>
                        <h1>üìä Dashboard</h1>
                        <p class="page-subtitle">Vis√£o geral do seu estabelecimento</p>
                    </header>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">üí∞ Total de Vendas</div>
                            <div class="stat-value" id="dashTotalSales">R$ 0,00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">üìã Comandas Ativas</div>
                            <div class="stat-value" id="dashActiveOrders">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">‚úì Comandas Fechadas</div>
                            <div class="stat-value" id="dashClosedOrders">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">üì¶ Produtos</div>
                            <div class="stat-value" id="dashProductCount">0</div>
                        </div>
                    </div>

                    <!-- ... (Rest of Dashboard structure from paste) ... -->
                    <div class="card">
                        <div class="card-content">
                            <p style="text-align:center; color: #888;">Conte√∫do do Dashboard aqui (Use o c√≥digo original para preencher o restante das tabelas)</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Menu Page -->
            <section id="menu" class="page">
                 <div class="container">
                    <header>
                        <h1>üõí Card√°pio</h1>
                        <p class="page-subtitle">Gerenciar produtos do menu</p>
                    </header>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Adicionar Produto</div>
                        </div>
                        <div class="card-content">
                             <div class="form-row">
                                <input type="text" id="newProductName" placeholder="Nome do Produto">
                                <select id="newProductCategory">
                                    <option value="ESPETO">ESPETO</option>
                                    <option value="BEBIDA">BEBIDA</option>
                                    <option value="ITENS PARA CHURRASCO">ITENS PARA CHURRASCO</option>
                                </select>
                                <input type="number" id="newProductPrice" placeholder="Pre√ßo (R$)">
                                <button class="btn" onclick="addProduct()">Adicionar</button>
                             </div>
                        </div>
                    </div>
                 </div>
            </section>

            <!-- Orders Page -->
            <section id="orders" class="page">
                 <div class="container">
                    <header><h1>üìã Comandas</h1></header>
                    <p>Funcionalidade de Comandas aqui...</p>
                 </div>
            </section>

            <!-- Sales Page -->
            <section id="sales" class="page">
                 <div class="container">
                    <header><h1>üí∞ Vendas</h1></header>
                    <p>Hist√≥rico de vendas aqui...</p>
                 </div>
            </section>

        </main>
    </div>

    <script>
        // --- Firebase Config ---
        const firebaseConfig = {
            apiKey: "AIzaSyD5NWbiiPIoc4N9qUizsAkX-S_jbsWUhfY",
            authDomain: "espeto-a4f94.firebaseapp.com",
            projectId: "espeto-a4f94",
            storageBucket: "espeto-a4f94.firebasestorage.app",
            messagingSenderId: "1021397176394",
            appId: "1:1021397176394:web:9b65858006f96bcf4956b3",
            measurementId: "G-56HE56LKJ5"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const googleProvider = new firebase.auth.GoogleAuthProvider();

        // --- Google Sheets Config ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzByZiYCdUTgiY2XJhnCESUr40BR2YPON-GCscgkEE/exec";

        // --- Auth Logic ---
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainApp').style.display = 'flex';
                console.log("User logged in:", user.email);
            } else {
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('mainApp').style.display = 'none';
            }
        });

        function handleLogin() {
            auth.signInWithPopup(googleProvider).catch(error => alert("Erro no login: " + error.message));
        }

        function handleLogout() {
            auth.signOut();
        }

        // --- UI Logic ---
        function switchPage(pageId, event) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            if(event) event.currentTarget.classList.add('active');
        }

        // --- Product Logic ---
        function addProduct() {
            const name = document.getElementById('newProductName').value;
            const category = document.getElementById('newProductCategory').value;
            const price = document.getElementById('newProductPrice').value;

            if (!name || !price) return alert("Preencha todos os campos");

            const product = {
                id: Date.now(),
                name,
                category,
                price: parseFloat(price)
            };

            // Send to Google Sheets
            const formData = new FormData();
            formData.append('action', 'createProduct');
            formData.append('data', JSON.stringify(product));

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: formData
            }).then(() => {
                alert("Produto enviado para a planilha!");
                document.getElementById('newProductName').value = '';
                document.getElementById('newProductPrice').value = '';
            }).catch(err => console.error(err));
        }
    </script>
</body>
</html>
